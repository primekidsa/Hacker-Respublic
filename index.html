<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Hacker OS v3.0</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        /* --- –°–¢–ò–õ–ò (CSS) --- */
        :root {
            --bg: #050505;
            --panel: #0a0a0a;
            --primary: #00ff00;
            --danger: #ff0000;
            --dim: #004400;
            --text: #e0e0e0;
        }

        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: 'Courier New', monospace;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
            user-select: none;
            -webkit-user-select: none;
        }

        /* –í–µ—Ä—Ö–Ω–∏–π –±–∞—Ä (–°—Ç–∞—Ç—ã) */
        .status-bar {
            background: var(--panel);
            border-bottom: 1px solid var(--primary);
            padding: 10px;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            font-size: 12px;
            gap: 5px;
            z-index: 10;
        }
        .stat-item { color: var(--primary); font-weight: bold; }

        /* –û–±–ª–∞—Å—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
        #content-area {
            flex-grow: 1;
            overflow-y: auto;
            padding: 15px;
            position: relative;
        }

        /* –≠–∫—Ä–∞–Ω—ã (–°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ, –∫—Ä–æ–º–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ) */
        .screen { display: none; animation: fadeIn 0.3s; }
        .screen.active { display: block; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* –ó–∞–≥–æ–ª–æ–≤–∫–∏ */
        h2 {
            border-bottom: 1px dashed var(--primary);
            color: var(--primary);
            margin-top: 0;
            padding-bottom: 5px;
            text-transform: uppercase;
            font-size: 18px;
        }

        /* –ö–Ω–æ–ø–∫–∏ */
        button {
            background: var(--dim);
            color: var(--primary);
            border: 1px solid var(--primary);
            padding: 12px;
            font-family: inherit;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            margin-bottom: 8px;
            text-transform: uppercase;
            transition: 0.1s;
        }
        button:active { background: var(--primary); color: black; transform: scale(0.98); }
        button.danger { border-color: var(--danger); color: var(--danger); background: #330000; }
        button.danger:active { background: var(--danger); color: white; }

        /* –ü–æ–ª–æ—Å–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ */
        .progress-container {
            width: 100%; background: #222; height: 20px; border: 1px solid #555;
            margin: 10px 0; position: relative;
        }
        .progress-fill {
            height: 100%; background: var(--primary); width: 0%;
            transition: width 0.1s linear;
        }

        /* –ö–∞—Ä—Ç–æ—á–∫–∏ (–≤ –º–∞–≥–∞–∑–∏–Ω–µ/–∫–æ–º–ø–∞–Ω–∏–∏) */
        .card {
            border: 1px solid #333;
            padding: 10px;
            margin-bottom: 10px;
            background: rgba(0, 255, 0, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .card span { font-size: 14px; }
        .card button { width: auto; margin: 0; padding: 5px 10px; font-size: 12px; }

        /* –ù–∏–∂–Ω–µ–µ –º–µ–Ω—é */
        .nav-bar {
            background: var(--panel);
            border-top: 1px solid var(--primary);
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            padding: 5px;
        }
        .nav-btn {
            background: transparent; border: none;
            color: #555; font-size: 20px; padding: 10px 0;
        }
        .nav-btn.active { color: var(--primary); text-shadow: 0 0 5px var(--primary); }

        /* –ö–æ–Ω—Å–æ–ª—å –ª–æ–≥–æ–≤ */
        #console {
            font-size: 10px; color: #888;
            border-top: 1px dashed #333;
            margin-top: 20px; padding-top: 5px;
            height: 60px; overflow-y: scroll;
        }
    </style>
</head>
<body>

    <div class="status-bar">
        <div class="stat-item" id="ui-money">üíµ 0$</div>
        <div class="stat-item" id="ui-energy">‚ö° 100%</div>
        <div class="stat-item" id="ui-btc">‚Çø 0.00</div>
    </div>

    <div id="content-area">

        <div id="screen-work" class="screen active">
            <h2>üíª Freelance Terminal</h2>
            <div class="card">
                <span>–ü—Ä–æ–µ–∫—Ç: <b id="job-name">–í–∑–ª–æ–º Wi-Fi</b></span>
                <span id="job-reward">Reward: 50$</span>
            </div>
            
            <div class="progress-container">
                <div id="work-bar" class="progress-fill"></div>
            </div>
            
            <button onclick="doWork()" style="height: 60px; font-size: 20px;">üî® TAP TO CODE</button>
            
            <div id="console"></div>
        </div>

        <div id="screen-company" class="screen">
            <h2>üè¢ My Evil Corp</h2>
            <p>–ü–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥: <b id="company-income">0</b>$/—Å–µ–∫</p>
            
            <div id="employees-list">
                </div>

            <h3>–ù–∞–π–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</h3>
            <div class="card">
                <span>Junior Dev (+2$/c)</span>
                <button onclick="hire('junior', 1000, 2)">1000$</button>
            </div>
            <div class="card">
                <span>Middle Dev (+10$/c)</span>
                <button onclick="hire('middle', 5000, 10)">5000$</button>
            </div>
            <div class="card">
                <span>Senior Dev (+50$/c)</span>
                <button onclick="hire('senior', 20000, 50)">20k$</button>
            </div>
        </div>

        <div id="screen-crypto" class="screen">
            <h2>üìà DarkNet Exchange</h2>
            <div style="text-align: center; margin-bottom: 10px; border: 1px solid #333; padding: 10px;">
                1 BTC = <b id="btc-rate" style="color:var(--primary); font-size: 20px;">50000</b>$
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <button onclick="trade('buy')">üìâ BUY 0.1</button>
                <button onclick="trade('sell')">üìà SELL 0.1</button>
            </div>

            <h3>–ú–∞–π–Ω–∏–Ω–≥ —Ñ–µ—Ä–º–∞</h3>
            <p>–ú–∞–π–Ω–µ—Ä–æ–≤: <b id="miners-count">0</b></p>
            <div class="card">
                <span>ASIC Miner (+0.0001 BTC/s)</span>
                <button onclick="buyMiner()">2000$</button>
            </div>
        </div>

        <div id="screen-pvp" class="screen">
            <h2>üíÄ PvP Hacking</h2>
            
            <div id="pvp-idle">
                <p>–ü–æ–∏—Å–∫ —É—è–∑–≤–∏–º—ã—Ö —Å–µ—Ç–µ–π...</p>
                <button onclick="startHack()">üì° SCAN NETWORK</button>
            </div>

            <div id="pvp-active" style="display:none;">
                <p>–í–∑–ª–æ–º —Ü–µ–ª–∏: <b id="target-name">User_123</b></p>
                <p style="font-size: 12px; color: #888">–ë—ã—Å—Ç—Ä–æ –Ω–∞–∂–∏–º–∞–π BRUTE FORCE!</p>
                
                <div class="progress-container" style="border-color: red;">
                    <div id="hack-bar" class="progress-fill" style="background: red;"></div>
                </div>
                
                <button class="danger" onclick="tapHack()" style="height: 80px; font-size: 20px;">üíÄ BRUTE FORCE</button>
                <button onclick="stopHack()" style="margin-top: 10px; font-size: 12px;">–û–¢–ú–ï–ù–ê</button>
            </div>
        </div>

        <div id="screen-settings" class="screen">
            <h2>üíæ System</h2>
            <p>–ë–∞–ª–∞–Ω—Å –±–∞–Ω–∫–∞: <b id="bank-val">0</b>$</p>
            <div class="card">
                <input type="number" id="bank-in" placeholder="–°—É–º–º–∞" style="width: 50px; background: black; color: white; border: 1px solid green;">
                <button onclick="bankDep()">Dep</button>
                <button onclick="bankWith()">With</button>
            </div>
            <br>
            <button onclick="saveData()">üíæ SAVE & CLOSE</button>
            <p style="font-size: 10px; text-align: center;">–î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –±–æ—Ç—É.</p>
        </div>

    </div>

    <div class="nav-bar">
        <button class="nav-btn active" onclick="nav('work')">üíª</button>
        <button class="nav-btn" onclick="nav('company')">üè¢</button>
        <button class="nav-btn" onclick="nav('crypto')">üìà</button>
        <button class="nav-btn" onclick="nav('pvp')">üíÄ</button>
        <button class="nav-btn" onclick="nav('settings')">üíæ</button>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.enableClosingConfirmation();

        // --- –°–û–°–¢–û–Ø–ù–ò–ï –ò–ì–†–´ ---
        let player = {
            money: 500,
            energy: 100,
            btc: 0.0,
            bank: 0,
            miners: 0,
            employees: { junior: 0, middle: 0, senior: 0 }
        };

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∏
        let btcRate = 50000;
        let workProgress = 0;
        let hackProgress = 0;
        let isHacking = false;

        // --- –°–ò–°–¢–ï–ú–ù–´–ï –§–£–ù–ö–¶–ò–ò ---
        function nav(screen) {
            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–æ–≤
            document.querySelectorAll('.screen').forEach(el => el.classList.remove('active'));
            document.getElementById(`screen-${screen}`).classList.add('active');
            
            // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –∫–Ω–æ–ø–æ–∫
            document.querySelectorAll('.nav-btn').forEach(el => el.classList.remove('active'));
            event.currentTarget.classList.add('active');
        }

        function updateUI() {
            // –°—Ç–∞—Ç—ã
            document.getElementById('ui-money').innerText = `üíµ ${Math.floor(player.money)}`;
            document.getElementById('ui-energy').innerText = `‚ö° ${Math.floor(player.energy)}%`;
            document.getElementById('ui-btc').innerText = `‚Çø ${player.btc.toFixed(4)}`;
            
            // –ö–æ–º–ø–∞–Ω–∏—è
            let income = (player.employees.junior * 2) + (player.employees.middle * 10) + (player.employees.senior * 50);
            document.getElementById('company-income').innerText = income;

            // –ö—Ä–∏–ø—Ç–∞
            document.getElementById('btc-rate').innerText = Math.floor(btcRate);
            document.getElementById('miners-count').innerText = player.miners;

            // –ë–∞–Ω–∫
            document.getElementById('bank-val').innerText = player.bank;
        }

        function log(msg) {
            let div = document.createElement('div');
            div.innerText = `> ${msg}`;
            document.getElementById('console').prepend(div);
        }

        // --- –†–ê–ë–û–¢–ê (–ö–õ–ò–ö–ï–†) ---
        function doWork() {
            if (player.energy < 1) { tg.HapticFeedback.notificationOccurred('error'); return; }
            
            player.energy -= 1;
            workProgress += 10;
            tg.HapticFeedback.impactOccurred('light');

            document.getElementById('work-bar').style.width = workProgress + "%";

            if (workProgress >= 100) {
                let reward = Math.floor(Math.random() * 50) + 30;
                player.money += reward;
                workProgress = 0;
                document.getElementById('work-bar').style.width = "0%";
                log(`–ó–∞–∫–∞–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω: +${reward}$`);
                tg.HapticFeedback.notificationOccurred('success');
            }
            updateUI();
        }

        // --- –ö–û–ú–ü–ê–ù–ò–Ø ---
        function hire(type, cost, income) {
            if (player.money >= cost) {
                player.money -= cost;
                player.employees[type]++;
                log(`–ù–∞–Ω—è—Ç ${type} dev`);
                renderEmployees();
                updateUI();
                tg.HapticFeedback.impactOccurred('medium');
            } else {
                tg.HapticFeedback.notificationOccurred('error');
            }
        }

        function renderEmployees() {
            let html = "";
            if (player.employees.junior > 0) html += `<div class="card"><span>Juniors: ${player.employees.junior}</span></div>`;
            if (player.employees.middle > 0) html += `<div class="card"><span>Middles: ${player.employees.middle}</span></div>`;
            if (player.employees.senior > 0) html += `<div class="card"><span>Seniors: ${player.employees.senior}</span></div>`;
            document.getElementById('employees-list').innerHTML = html;
        }

        // --- –ö–†–ò–ü–¢–ê ---
        function trade(type) {
            let cost = btcRate * 0.1;
            if (type === 'buy') {
                if (player.money >= cost) {
                    player.money -= cost; player.btc += 0.1;
                    log(`Bought 0.1 BTC (-${Math.floor(cost)}$)`);
                }
            } else {
                if (player.btc >= 0.1) {
                    player.btc -= 0.1; player.money += cost;
                    log(`Sold 0.1 BTC (+${Math.floor(cost)}$)`);
                }
            }
            updateUI();
        }

        function buyMiner() {
            if (player.money >= 2000) {
                player.money -= 2000; player.miners++;
                log("–ú–∞–π–Ω–µ—Ä —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω");
                updateUI();
            }
        }

        // --- PVP –í–ó–õ–û–ú (–ú–ò–ù–ò –ò–ì–†–ê) ---
        function startHack() {
            if (player.energy < 20) { log("–ú–∞–ª–æ —ç–Ω–µ—Ä–≥–∏–∏ (–Ω—É–∂–Ω–æ 20)"); return; }
            
            document.getElementById('pvp-idle').style.display = 'none';
            document.getElementById('pvp-active').style.display = 'block';
            document.getElementById('target-name').innerText = "User_" + Math.floor(Math.random() * 9999);
            
            isHacking = true;
            hackProgress = 0;
            document.getElementById('hack-bar').style.width = "0%";
            
            // –¢–∞–π–º–µ—Ä –ø—Ä–æ–≤–∞–ª–∞ (–Ω—É–∂–Ω–æ —É—Å–ø–µ—Ç—å –∑–∞ 5 —Å–µ–∫—É–Ω–¥)
            setTimeout(() => {
                if (isHacking) {
                    log("–í–∑–ª–æ–º –ø—Ä–æ–≤–∞–ª–µ–Ω! –í–∞—Å –∑–∞—Å–µ–∫–ª–∏.");
                    stopHack();
                }
            }, 5000);
        }

        function tapHack() {
            if (!isHacking) return;
            hackProgress += 8; // –°–ª–æ–∂–Ω–æ—Å—Ç—å –≤–∑–ª–æ–º–∞
            document.getElementById('hack-bar').style.width = hackProgress + "%";
            tg.HapticFeedback.impactOccurred('medium');

            if (hackProgress >= 100) {
                isHacking = false;
                let stolen = Math.floor(Math.random() * 300) + 100;
                player.money += stolen;
                log(`–í–ó–õ–û–ú –£–°–ü–ï–®–ï–ù! –£–∫—Ä–∞–¥–µ–Ω–æ: ${stolen}$`);
                tg.HapticFeedback.notificationOccurred('success');
                stopHack();
            }
        }

        function stopHack() {
            isHacking = false;
            document.getElementById('pvp-idle').style.display = 'block';
            document.getElementById('pvp-active').style.display = 'none';
            updateUI();
        }

        // --- –ë–ê–ù–ö ---
        function bankDep() {
            let val = parseInt(document.getElementById('bank-in').value);
            if (val > 0 && player.money >= val) {
                player.money -= val; player.bank += val;
                updateUI();
            }
        }
        function bankWith() {
            let val = parseInt(document.getElementById('bank-in').value);
            if (val > 0 && player.bank >= val) {
                player.bank -= val; player.money += val;
                updateUI();
            }
        }

        // --- –ò–ì–†–û–í–û–ô –¶–ò–ö–õ (1 –°–ï–ö–£–ù–î–ê) ---
        setInterval(() => {
            // –≠–Ω–µ—Ä–≥–∏—è
            if (player.energy < 100) player.energy += 1;

            // –ö—É—Ä—Å –±–∏—Ç–∫–∞
            btcRate = Math.max(100, btcRate + (Math.random() * 400 - 200));

            // –ü–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥ (–ö–æ–º–ø–∞–Ω–∏—è)
            let income = (player.employees.junior * 2) + (player.employees.middle * 10) + (player.employees.senior * 50);
            player.money += income;

            // –ú–∞–π–Ω–∏–Ω–≥
            if (player.miners > 0) player.btc += (player.miners * 0.0001);

            updateUI();
        }, 1000);

        // --- –°–û–•–†–ê–ù–ï–ù–ò–ï ---
        function saveData() {
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –±–æ—Ç—É
            let data = JSON.stringify({
                money: player.money,
                // –í –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –≤—Å—ë —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –µ—Å–ª–∏ –±–æ—Ç —É–º–µ–µ—Ç –µ–≥–æ –ø–∞—Ä—Å–∏—Ç—å
            });
            tg.sendData(data);
        }

        // –°—Ç–∞—Ä—Ç
        updateUI();

    </script>
</body>
</html>
